<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text-html; charset=utf-8" /><title>6.4&nbsp;API for Installing ".plt" Archives</title><link rel="stylesheet" type="text/css" href="../scribble.css" title="default" /><link rel="stylesheet" type="text/css" href="../racket.css" title="default" /><link rel="stylesheet" type="text/css" href="../scribble-style.css" title="default" /><script type="text/javascript" src="../scribble-common.js"></script></head><body id="doc-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist" style="margin-bottom: 1em;"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="index.html" class="tocviewlink" pltdoc="x"><span class="stt">raco</span>:<span class="mywbr"> </span> Racket Command-<wbr></wbr>Line Tools</a></td></tr></table></div><div class="tocviewsublisttop" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="make.html" class="tocviewlink" pltdoc="x"><span class="stt">raco make</span>:<span class="mywbr"> </span> Compiling Source to Bytecode</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="exe.html" class="tocviewlink" pltdoc="x"><span class="stt">raco exe</span>:<span class="mywbr"> </span> Creating Stand-<wbr></wbr>Alone Executables</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="exe-dist.html" class="tocviewlink" pltdoc="x"><span class="stt">raco distribute</span>:<span class="mywbr"> </span> Sharing Stand-<wbr></wbr>Alone Executables</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="plt.html" class="tocviewlink" pltdoc="x"><span class="stt">raco pack</span>:<span class="mywbr"> </span> Packaging Library Collections</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="planet.html" class="tocviewlink" pltdoc="x"><span class="stt">raco planet</span>:<span class="mywbr"> </span> Automatic Package Distribution</a></td></tr><tr><td align="right">6&nbsp;</td><td><a href="setup.html" class="tocviewselflink" pltdoc="x"><span class="stt">raco setup</span>:<span class="mywbr"> </span> Installation Management</a></td></tr><tr><td align="right">7&nbsp;</td><td><a href="decompile.html" class="tocviewlink" pltdoc="x"><span class="stt">raco decompile</span>:<span class="mywbr"> </span> Decompiling Bytecode</a></td></tr><tr><td align="right">8&nbsp;</td><td><a href="ctool.html" class="tocviewlink" pltdoc="x"><span class="stt">raco ctool</span>:<span class="mywbr"> </span> Working with C Code</a></td></tr><tr><td align="right">9&nbsp;</td><td><a href="command.html" class="tocviewlink" pltdoc="x">Adding a <span class="stt">raco</span> Command</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9660;</a></td><td>6&nbsp;</td><td><a href="setup.html" class="tocviewlink" pltdoc="x"><span class="stt">raco setup</span>:<span class="mywbr"> </span> Installation Management</a></td></tr></table><div class="tocviewsublist" style="display: block;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">6.1&nbsp;</td><td><a href="running.html" class="tocviewlink" pltdoc="x">Running <span class="stt">raco setup</span></a></td></tr><tr><td align="right">6.2&nbsp;</td><td><a href="info_rkt.html" class="tocviewlink" pltdoc="x"><span class="stt">"info.rkt"</span> File Format</a></td></tr><tr><td align="right">6.3&nbsp;</td><td><a href="setup-plt-plt.html" class="tocviewlink" pltdoc="x">API for Installation</a></td></tr><tr><td align="right">6.4&nbsp;</td><td><a href="" class="tocviewselflink" pltdoc="x">API for Installing <span class="stt">".plt"</span> Archives</a></td></tr><tr><td align="right">6.5&nbsp;</td><td><a href="dirs.html" class="tocviewlink" pltdoc="x">API for Finding Installation Directories</a></td></tr><tr><td align="right">6.6&nbsp;</td><td><a href="getinfo.html" class="tocviewlink" pltdoc="x">API for Reading <span class="stt">"info.rkt"</span> Files</a></td></tr><tr><td align="right">6.7&nbsp;</td><td><a href="main-collects.html" class="tocviewlink" pltdoc="x">API for Paths Relative to <span class="stt">"collects"</span></a></td></tr><tr><td align="right">6.8&nbsp;</td><td><a href="xref.html" class="tocviewlink" pltdoc="x">API for Cross-<wbr></wbr>References for Installed Manuals</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_2&quot;);">&#9658;</a></td><td>6.4&nbsp;</td><td><a href="" class="tocviewselflink" pltdoc="x">API for Installing <span class="stt">".plt"</span> Archives</a></td></tr></table><div class="tocviewsublistbottom" style="display: none;" id="tocview_2"><table cellspacing="0" cellpadding="0"><tr><td align="right">6.4.1&nbsp;</td><td><a href="#(part._.Installing_a_.Single___plt__.File)" class="tocviewlink" pltdoc="x">Installing a Single <span class="stt">".plt"</span> File</a></td></tr><tr><td align="right">6.4.2&nbsp;</td><td><a href="#(part._unpacking-..plt-archives)" class="tocviewlink" pltdoc="x">Unpacking <span class="stt">".plt"</span> Archives</a></td></tr><tr><td align="right">6.4.3&nbsp;</td><td><a href="#(part._format-of-..plt-archives)" class="tocviewlink" pltdoc="x">Format of <span class="stt">".plt"</span> Archives</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber">6.4.1<tt>&nbsp;</tt></span><a href="#(part._.Installing_a_.Single___plt__.File)" class="tocsubseclink" pltdoc="x">Installing a Single <span class="stt">".plt"</span> File</a></td></tr><tr><td><span class="tocsublinknumber">6.4.1.1<tt>&nbsp;</tt></span><a href="#(part._.Non-.G.U.I_.Installer)" class="tocsubseclink" pltdoc="x">Non-<wbr></wbr>GUI Installer</a></td></tr><tr><td><a href="#(def._((lib._setup/plt-single-installer..rkt)._run-single-installer))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: setup/plt-single-installer"><span class="RktSym"><span class="RktValLink">run-<wbr></wbr>single-<wbr></wbr>installer</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._setup/plt-single-installer..rkt)._install-planet-package))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: setup/plt-single-installer"><span class="RktSym"><span class="RktValLink">install-<wbr></wbr>planet-<wbr></wbr>package</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._setup/plt-single-installer..rkt)._reindex-user-documentation))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: setup/plt-single-installer"><span class="RktSym"><span class="RktValLink">reindex-<wbr></wbr>user-<wbr></wbr>documentation</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._setup/plt-single-installer..rkt)._clean-planet-package))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: setup/plt-single-installer"><span class="RktSym"><span class="RktValLink">clean-<wbr></wbr>planet-<wbr></wbr>package</span></span></span></a></td></tr><tr><td><span class="tocsublinknumber">6.4.1.2<tt>&nbsp;</tt></span><a href="#(part._gui-unpacking)" class="tocsubseclink" pltdoc="x">GUI Installer</a></td></tr><tr><td><a href="#(def._((lib._setup/plt-installer..rkt)._run-installer))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: setup/plt-installer"><span class="RktSym"><span class="RktValLink">run-<wbr></wbr>installer</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._setup/plt-installer..rkt)._on-installer-run))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: setup/plt-installer"><span class="RktSym"><span class="RktValLink">on-<wbr></wbr>installer-<wbr></wbr>run</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._setup/plt-installer..rkt)._with-installer-window))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: setup/plt-installer"><span class="RktSym"><span class="RktValLink">with-<wbr></wbr>installer-<wbr></wbr>window</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._setup/plt-installer..rkt)._run-single-installer))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: setup/plt-installer"><span class="RktSym"><span class="RktValLink">run-<wbr></wbr>single-<wbr></wbr>installer</span></span></span></a></td></tr><tr><td><span class="tocsublinknumber">6.4.1.3<tt>&nbsp;</tt></span><a href="#(part._.G.U.I_.Unpacking_.Signature)" class="tocsubseclink" pltdoc="x">GUI Unpacking Signature</a></td></tr><tr><td><a href="#(form._((lib._setup/plt-installer-sig..rkt)._setup~3aplt-installer~5e))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: setup/plt-installer-sig"><span class="RktSym"><span class="RktStxLink">setup:<span class="mywbr"> </span>plt-<wbr></wbr>installer^</span></span></span></a></td></tr><tr><td><span class="tocsublinknumber">6.4.1.4<tt>&nbsp;</tt></span><a href="#(part._.G.U.I_.Unpacking_.Unit)" class="tocsubseclink" pltdoc="x">GUI Unpacking Unit</a></td></tr><tr><td><span class="tocsublinknumber">6.4.2<tt>&nbsp;</tt></span><a href="#(part._unpacking-..plt-archives)" class="tocsubseclink" pltdoc="x">Unpacking <span class="stt">".plt"</span> Archives</a></td></tr><tr><td><a href="#(def._((lib._setup/unpack..rkt)._unpack))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: setup/unpack"><span class="RktSym"><span class="RktValLink">unpack</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._setup/unpack..rkt)._fold-plt-archive))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: setup/unpack"><span class="RktSym"><span class="RktValLink">fold-<wbr></wbr>plt-<wbr></wbr>archive</span></span></span></a></td></tr><tr><td><span class="tocsublinknumber">6.4.3<tt>&nbsp;</tt></span><a href="#(part._format-of-..plt-archives)" class="tocsubseclink" pltdoc="x">Format of <span class="stt">".plt"</span> Archives</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="navsettop"><span class="navleft"><form class="searchform"><input class="searchbox" style="color: #888;" type="text" value="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;5.0.2&quot;, &quot;../&quot;);" onfocus="this.style.color=&quot;black&quot;; this.style.textAlign=&quot;left&quot;; if (this.value == &quot;...search manuals...&quot;) this.value=&quot;&quot;;" onblur="if (this.value.match(/^ *$/)) { this.style.color=&quot;#888&quot;; this.style.textAlign=&quot;center&quot;; this.value=&quot;...search manuals...&quot;; }" /></form>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" pltdoc="x" onclick="return GotoPLTRoot(&quot;5.0.2&quot;);">top</a></span><span class="navright"><a href="setup-plt-plt.html" title="backward to &quot;6.3 API for Installation&quot;" pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="setup.html" title="up to &quot;6 raco setup: Installation Management&quot;" pltdoc="x">up</a>&nbsp;&nbsp;<a href="dirs.html" title="forward to &quot;6.5 API for Finding Installation Directories&quot;" pltdoc="x">next &rarr;</a></span>&nbsp;</div><h4>6.4<tt>&nbsp;</tt><a name="(part._..plt-archives)"></a>API for Installing <span class="stt">".plt"</span> Archives</h4><h5>6.4.1<tt>&nbsp;</tt><a name="(part._.Installing_a_.Single___plt__.File)"></a>Installing a Single <span class="stt">".plt"</span> File</h5><p>The <a href="#(mod-path._setup/plt-single-installer)" class="RktModLink" pltdoc="x"><span class="RktSym">setup/plt-single-installer</span></a> module provides a
function for installing a single <span class="stt">".plt"</span> file, and
<a href="#(mod-path._setup/plt-installer)" class="RktModLink" pltdoc="x"><span class="RktSym">setup/plt-installer</span></a> wraps it with a GUI
interface.</p><h5>6.4.1.1<tt>&nbsp;</tt><a name="(part._.Non-.G.U.I_.Installer)"></a><a name="(mod-path._setup/plt-single-installer)"></a>Non-GUI Installer</h5><p><table cellspacing="0" class="defmodule"><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/require.html#(form._((lib._racket/private/base..rkt)._require))" class="RktStxLink" pltdoc="x">require</a></span><span class="stt"> </span><a href="#(mod-path._setup/plt-single-installer)" class="RktModLink" pltdoc="x"><span class="RktSym">setup/plt-single-installer</span></a><span class="RktPn">)</span></td></tr></table></p><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><span class="RktPn">(</span><a name="(dep._((lib._setup/plt-single-installer..rkt)._run-single-installer))"></a><a name="(def._((lib._setup/plt-single-installer..rkt)._run-single-installer))"></a><span title="Provided from: setup/plt-single-installer"><span class="RktSym"><a href="#(def._((lib._setup/plt-single-installer..rkt)._run-single-installer))" class="RktValLink" pltdoc="x">run-single-installer</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">file</span><span class="hspace">&nbsp;</span><span class="RktVar">get-dir-proc</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/void.html#(def._((quote._~23~25kernel)._void~3f))" class="RktValLink" pltdoc="x">void?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">file</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Manipulating_Paths.html#(def._((lib._racket/private/misc..rkt)._path-string~3f))" class="RktValLink" pltdoc="x">path-string?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">get-dir-proc</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Function_Contracts.html#(form._((lib._racket/contract..rkt)._-~3e))" class="RktStxLink" pltdoc="x">-&gt;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(def._((lib._racket/contract/private/misc..rkt)._or/c))" class="RktValLink" pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Manipulating_Paths.html#(def._((lib._racket/private/misc..rkt)._path-string~3f))" class="RktValLink" pltdoc="x">path-string?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(def._((lib._racket/contract/private/misc..rkt)._false/c))" class="RktValLink" pltdoc="x">false/c</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></div><div class="SIntrapara">Creates a separate thread and namespace, runs the installer in that
thread with the new namespace, and returns when the thread
completes or dies. It also creates a custodian
(see <a href="../reference/custodians.html" pltdoc="x">Custodians</a>) to manage the
created thread, sets the exit handler for the thread to shut down
the custodian, and explicitly shuts down the custodian
when the created thread terminates or dies.</div></p><p><div class="SIntrapara">The <span class="RktVar">get-dir-proc</span> procedure is called if the installer needs a
target directory for installation, and a <span class="RktVal">#f</span> result means that
the user canceled the installation. Typically, <span class="RktVar">get-dir-proc</span> is
<span class="RktSym"><a href="../reference/Filesystem.html#(def._((quote._~23~25kernel)._current-directory))" class="RktValLink" pltdoc="x">current-directory</a></span>.
v
</div><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><span class="RktPn">(</span><a name="(dep._((lib._setup/plt-single-installer..rkt)._install-planet-package))"></a><a name="(def._((lib._setup/plt-single-installer..rkt)._install-planet-package))"></a><span title="Provided from: setup/plt-single-installer"><span class="RktSym"><a href="#(def._((lib._setup/plt-single-installer..rkt)._install-planet-package))" class="RktValLink" pltdoc="x">install-planet-package</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">file</span><span class="hspace">&nbsp;</span><span class="RktVar">directory</span><span class="hspace">&nbsp;</span><span class="RktVar">spec</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/void.html#(def._((quote._~23~25kernel)._void~3f))" class="RktValLink" pltdoc="x">void?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">file</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Manipulating_Paths.html#(def._((lib._racket/private/misc..rkt)._path-string~3f))" class="RktValLink" pltdoc="x">path-string?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">directory</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Manipulating_Paths.html#(def._((lib._racket/private/misc..rkt)._path-string~3f))" class="RktValLink" pltdoc="x">path-string?</a></span></td></tr><tr><td><table cellspacing="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="RktVar">spec</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(def._((lib._racket/contract/private/misc..rkt)._list/c))" class="RktValLink" pltdoc="x">list/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/strings.html#(def._((quote._~23~25kernel)._string~3f))" class="RktValLink" pltdoc="x">string?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/strings.html#(def._((quote._~23~25kernel)._string~3f))" class="RktValLink" pltdoc="x">string?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(def._((lib._racket/contract/private/misc..rkt)._listof))" class="RktValLink" pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/strings.html#(def._((quote._~23~25kernel)._string~3f))" class="RktValLink" pltdoc="x">string?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym"><a href="../reference/number-types.html#(def._((quote._~23~25kernel)._exact-nonnegative-integer~3f))" class="RktValLink" pltdoc="x">exact-nonnegative-integer?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym"><a href="../reference/number-types.html#(def._((quote._~23~25kernel)._exact-nonnegative-integer~3f))" class="RktValLink" pltdoc="x">exact-nonnegative-integer?</a></span><span class="RktPn">)</span></td></tr></table></td></tr></table></td></tr></table></div><div class="SIntrapara">Similar to <span class="RktSym"><a href="#(def._((lib._setup/plt-single-installer..rkt)._run-single-installer))" class="RktValLink" pltdoc="x">run-single-installer</a></span>, but runs the setup process
to install the archive <span class="RktVar">file</span> into <span class="RktVar">directory</span> as the
<span class="planetName">PLaneT</span> package described by <span class="RktVar">spec</span>. The user-specific
documentation index is not rebuilt, so <span class="RktSym"><a href="#(def._((lib._setup/plt-single-installer..rkt)._reindex-user-documentation))" class="RktValLink" pltdoc="x">reindex-user-documentation</a></span>
should be run after a set of <span class="planetName">PLaneT</span> packages are installed.</div></p><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><span class="RktPn">(</span><a name="(dep._((lib._setup/plt-single-installer..rkt)._reindex-user-documentation))"></a><a name="(def._((lib._setup/plt-single-installer..rkt)._reindex-user-documentation))"></a><span title="Provided from: setup/plt-single-installer"><span class="RktSym"><a href="#(def._((lib._setup/plt-single-installer..rkt)._reindex-user-documentation))" class="RktValLink" pltdoc="x">reindex-user-documentation</a></span></span><span class="RktPn"></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/void.html#(def._((quote._~23~25kernel)._void~3f))" class="RktValLink" pltdoc="x">void?</a></span></td></tr></table></div><div class="SIntrapara">Similar to <span class="RktSym"><a href="#(def._((lib._setup/plt-single-installer..rkt)._run-single-installer))" class="RktValLink" pltdoc="x">run-single-installer</a></span>, but runs only the part of
the setup process that rebuilds the user-specific documentation
start page, search page, and master index.</div></p><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><span class="RktPn">(</span><a name="(dep._((lib._setup/plt-single-installer..rkt)._clean-planet-package))"></a><a name="(def._((lib._setup/plt-single-installer..rkt)._clean-planet-package))"></a><span title="Provided from: setup/plt-single-installer"><span class="RktSym"><a href="#(def._((lib._setup/plt-single-installer..rkt)._clean-planet-package))" class="RktValLink" pltdoc="x">clean-planet-package</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">directory</span><span class="hspace">&nbsp;</span><span class="RktVar">spec</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/void.html#(def._((quote._~23~25kernel)._void~3f))" class="RktValLink" pltdoc="x">void?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">directory</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Manipulating_Paths.html#(def._((lib._racket/private/misc..rkt)._path-string~3f))" class="RktValLink" pltdoc="x">path-string?</a></span></td></tr><tr><td><table cellspacing="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="RktVar">spec</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(def._((lib._racket/contract/private/misc..rkt)._list/c))" class="RktValLink" pltdoc="x">list/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/strings.html#(def._((quote._~23~25kernel)._string~3f))" class="RktValLink" pltdoc="x">string?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/strings.html#(def._((quote._~23~25kernel)._string~3f))" class="RktValLink" pltdoc="x">string?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(def._((lib._racket/contract/private/misc..rkt)._listof))" class="RktValLink" pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/strings.html#(def._((quote._~23~25kernel)._string~3f))" class="RktValLink" pltdoc="x">string?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym"><a href="../reference/number-types.html#(def._((quote._~23~25kernel)._exact-nonnegative-integer~3f))" class="RktValLink" pltdoc="x">exact-nonnegative-integer?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym"><a href="../reference/number-types.html#(def._((quote._~23~25kernel)._exact-nonnegative-integer~3f))" class="RktValLink" pltdoc="x">exact-nonnegative-integer?</a></span><span class="RktPn">)</span></td></tr></table></td></tr></table></td></tr></table></div><div class="SIntrapara">Undoes the work of <span class="RktSym"><a href="#(def._((lib._setup/plt-single-installer..rkt)._install-planet-package))" class="RktValLink" pltdoc="x">install-planet-package</a></span>. The user-specific
documentation index is not rebuilt, so <span class="RktSym"><a href="#(def._((lib._setup/plt-single-installer..rkt)._reindex-user-documentation))" class="RktValLink" pltdoc="x">reindex-user-documentation</a></span>
should be run after a set of <span class="planetName">PLaneT</span> packages are removed.</div></p><h5>6.4.1.2<tt>&nbsp;</tt><a name="(part._gui-unpacking)"></a><a name="(mod-path._setup/plt-installer)"></a>GUI Installer</h5><p><div class="SIntrapara"><table cellspacing="0" class="defmodule"><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/require.html#(form._((lib._racket/private/base..rkt)._require))" class="RktStxLink" pltdoc="x">require</a></span><span class="stt"> </span><a href="#(mod-path._setup/plt-installer)" class="RktModLink" pltdoc="x"><span class="RktSym">setup/plt-installer</span></a><span class="RktPn">)</span></td></tr></table></div><div class="SIntrapara"> The
<a href="#(mod-path._setup/plt-installer)" class="RktModLink" pltdoc="x"><span class="RktSym">setup/plt-installer</span></a> library in the setup collection
defines procedures for installing a <span class="stt">".plt"</span> archive with a
GUI (using the facilities of <a href="../gui/index.html" class="RktModLink" pltdoc="x"><span class="RktSym">racket/gui/base</span></a>).</div></p><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><span class="RktPn">(</span><a name="(dep._((lib._setup/plt-installer..rkt)._run-installer))"></a><a name="(def._((lib._setup/plt-installer..rkt)._run-installer))"></a><span title="Provided from: setup/plt-installer"><span class="RktSym"><a href="#(def._((lib._setup/plt-installer..rkt)._run-installer))" class="RktValLink" pltdoc="x">run-installer</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">filename</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/void.html#(def._((quote._~23~25kernel)._void~3f))" class="RktValLink" pltdoc="x">void?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">filename</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Manipulating_Paths.html#(def._((lib._racket/private/misc..rkt)._path-string~3f))" class="RktValLink" pltdoc="x">path-string?</a></span></td></tr></table></div><div class="SIntrapara">Run the installer on the <span class="stt">".plt"</span> file
in <span class="RktVar">filename</span> and show the output in a window. This is a
composition of <span class="RktSym"><a href="#(def._((lib._setup/plt-installer..rkt)._with-installer-window))" class="RktValLink" pltdoc="x">with-installer-window</a></span> and
<span class="RktSym"><a href="#(def._((lib._setup/plt-installer..rkt)._run-single-installer))" class="RktValLink" pltdoc="x">run-single-installer</a></span> with a <span class="RktSym">get-dir-proc</span> that prompts
the user for a directory (turning off the busy cursor while the dialog
is active).</div></p><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><span class="RktPn">(</span><a name="(dep._((lib._setup/plt-installer..rkt)._on-installer-run))"></a><a name="(def._((lib._setup/plt-installer..rkt)._on-installer-run))"></a><span title="Provided from: setup/plt-installer"><span class="RktSym"><a href="#(def._((lib._setup/plt-installer..rkt)._on-installer-run))" class="RktValLink" pltdoc="x">on-installer-run</a></span></span><span class="RktPn"></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Function_Contracts.html#(form._((lib._racket/contract..rkt)._-~3e))" class="RktStxLink" pltdoc="x">-&gt;</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(form._((lib._racket/contract/private/guts..rkt)._any))" class="RktStxLink" pltdoc="x">any</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span title="Provided from: setup/plt-installer"><span class="RktSym"><a href="#(def._((lib._setup/plt-installer..rkt)._on-installer-run))" class="RktValLink" pltdoc="x">on-installer-run</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">thunk</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/void.html#(def._((quote._~23~25kernel)._void~3f))" class="RktValLink" pltdoc="x">void?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">thunk</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Function_Contracts.html#(form._((lib._racket/contract..rkt)._-~3e))" class="RktStxLink" pltdoc="x">-&gt;</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(form._((lib._racket/contract/private/guts..rkt)._any))" class="RktStxLink" pltdoc="x">any</a></span><span class="RktPn">)</span></td></tr></table></div><div class="SIntrapara">A thunk that is run after a <span class="stt">".plt"</span> file is installed.</div></p><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><table cellspacing="0" class="prototype"><tr><td><span class="RktPn">(</span><a name="(dep._((lib._setup/plt-installer..rkt)._with-installer-window))"></a><a name="(def._((lib._setup/plt-installer..rkt)._with-installer-window))"></a><span title="Provided from: setup/plt-installer"><span class="RktSym"><a href="#(def._((lib._setup/plt-installer..rkt)._with-installer-window))" class="RktValLink" pltdoc="x">with-installer-window</a></span></span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">do-install</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">cleanup-thunk</span><span class="RktPn">)</span></td><td><span class="hspace">&nbsp;</span></td><td>&rarr;</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktSym"><a href="../reference/void.html#(def._((quote._~23~25kernel)._void~3f))" class="RktValLink" pltdoc="x">void?</a></span></td></tr></table></td></tr><tr><td><table cellspacing="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="RktVar">do-install</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(def._((lib._racket/contract/private/misc..rkt)._or/c))" class="RktValLink" pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Object_and_Class_Contracts.html#(def._((lib._racket/class..rkt)._is-a~3f/c))" class="RktValLink" pltdoc="x">is-a?/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../gui/dialog_.html" class="RktValLink" pltdoc="x">dialog%</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Object_and_Class_Contracts.html#(def._((lib._racket/class..rkt)._is-a~3f/c))" class="RktValLink" pltdoc="x">is-a?/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../gui/frame_.html" class="RktValLink" pltdoc="x">frame%</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="../reference/Function_Contracts.html#(form._((lib._racket/contract..rkt)._-~3e))" class="RktStxLink" pltdoc="x">-&gt;</a></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/void.html#(def._((quote._~23~25kernel)._void~3f))" class="RktValLink" pltdoc="x">void?</a></span><span class="RktPn">)</span></td></tr></table></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">cleanup-thunk</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Function_Contracts.html#(form._((lib._racket/contract..rkt)._-~3e))" class="RktStxLink" pltdoc="x">-&gt;</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(form._((lib._racket/contract/private/guts..rkt)._any))" class="RktStxLink" pltdoc="x">any</a></span><span class="RktPn">)</span></td></tr></table></div><div class="SIntrapara">Creates a frame, sets up the current error and output ports, and
turns on the busy cursor before calling <span class="RktVar">do-install</span> in a separate
thread.</div></p><p>Returns before the installation process is complete;
<span class="RktVar">cleanup-thunk</span> is called on a queued callback to the
eventspace active when <span class="RktSym"><a href="#(def._((lib._setup/plt-installer..rkt)._with-installer-window))" class="RktValLink" pltdoc="x">with-installer-window</a></span> is
invoked.</p><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><span class="RktPn">(</span><a name="(dep._((lib._setup/plt-installer..rkt)._run-single-installer))"></a><a name="(def._((lib._setup/plt-installer..rkt)._run-single-installer))"></a><span title="Provided from: setup/plt-installer"><span class="RktSym"><a href="#(def._((lib._setup/plt-installer..rkt)._run-single-installer))" class="RktValLink" pltdoc="x">run-single-installer</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">file</span><span class="hspace">&nbsp;</span><span class="RktVar">get-dir-proc</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/void.html#(def._((quote._~23~25kernel)._void~3f))" class="RktValLink" pltdoc="x">void?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">file</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Manipulating_Paths.html#(def._((lib._racket/private/misc..rkt)._path-string~3f))" class="RktValLink" pltdoc="x">path-string?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">get-dir-proc</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Function_Contracts.html#(form._((lib._racket/contract..rkt)._-~3e))" class="RktStxLink" pltdoc="x">-&gt;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(def._((lib._racket/contract/private/misc..rkt)._or/c))" class="RktValLink" pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Manipulating_Paths.html#(def._((lib._racket/private/misc..rkt)._path-string~3f))" class="RktValLink" pltdoc="x">path-string?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(def._((lib._racket/contract/private/misc..rkt)._false/c))" class="RktValLink" pltdoc="x">false/c</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></div><div class="SIntrapara">The same as the export from <a href="#(mod-path._setup/plt-single-installer)" class="RktModLink" pltdoc="x"><span class="RktSym">setup/plt-single-installer</span></a>,
but with a GUI.</div></p><h5>6.4.1.3<tt>&nbsp;</tt><a name="(part._.G.U.I_.Unpacking_.Signature)"></a><a name="(mod-path._setup/plt-installer-sig)"></a>GUI Unpacking Signature</h5><p><div class="SIntrapara"><table cellspacing="0" class="defmodule"><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/require.html#(form._((lib._racket/private/base..rkt)._require))" class="RktStxLink" pltdoc="x">require</a></span><span class="stt"> </span><a href="#(mod-path._setup/plt-installer-sig)" class="RktModLink" pltdoc="x"><span class="RktSym">setup/plt-installer-sig</span></a><span class="RktPn">)</span></td></tr></table></div><div class="SIntrapara"><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><a name="(dep._((lib._setup/plt-installer-sig..rkt)._setup~3aplt-installer~5e))"></a><a name="(form._((lib._setup/plt-installer-sig..rkt)._setup~3aplt-installer~5e))"></a><span title="Provided from: setup/plt-installer-sig"><span class="RktSym"><a href="#(form._((lib._setup/plt-installer-sig..rkt)._setup~3aplt-installer~5e))" class="RktStxLink" pltdoc="x">setup:plt-installer^</a></span></span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span>signature</td></tr></table></div><div class="SIntrapara"><blockquote class="leftindent"><p>Provides two names: <span class="RktSym"><a href="#(def._((lib._setup/plt-installer..rkt)._run-installer))" class="RktValLink" pltdoc="x">run-installer</a></span> and <span class="RktSym"><a href="#(def._((lib._setup/plt-installer..rkt)._on-installer-run))" class="RktValLink" pltdoc="x">on-installer-run</a></span>.</p></blockquote></div></p></div></p><h5>6.4.1.4<tt>&nbsp;</tt><a name="(part._.G.U.I_.Unpacking_.Unit)"></a><a name="(mod-path._setup/plt-installer-unit)"></a>GUI Unpacking Unit</h5><p><div class="SIntrapara"><table cellspacing="0" class="defmodule"><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/require.html#(form._((lib._racket/private/base..rkt)._require))" class="RktStxLink" pltdoc="x">require</a></span><span class="stt"> </span><a href="#(mod-path._setup/plt-installer-unit)" class="RktModLink" pltdoc="x"><span class="RktSym">setup/plt-installer-unit</span></a><span class="RktPn">)</span></td></tr></table></div><div class="SIntrapara">Imports <span class="RktSym">mred^</span> and exports <span class="RktSym"><a href="#(form._((lib._setup/plt-installer-sig..rkt)._setup~3aplt-installer~5e))" class="RktStxLink" pltdoc="x">setup:plt-installer^</a></span>. </div></p><h5>6.4.2<tt>&nbsp;</tt><a name="(part._unpacking-..plt-archives)"></a><a name="(mod-path._setup/unpack)"></a>Unpacking <span class="stt">".plt"</span> Archives</h5><p><div class="SIntrapara"><table cellspacing="0" class="defmodule"><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/require.html#(form._((lib._racket/private/base..rkt)._require))" class="RktStxLink" pltdoc="x">require</a></span><span class="stt"> </span><a href="#(mod-path._setup/unpack)" class="RktModLink" pltdoc="x"><span class="RktSym">setup/unpack</span></a><span class="RktPn">)</span></td></tr></table></div><div class="SIntrapara">The <a href="#(mod-path._setup/unpack)" class="RktModLink" pltdoc="x"><span class="RktSym">setup/unpack</span></a>
library provides raw support for unpacking a <span class="stt">".plt"</span> file.</div></p><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><table cellspacing="0" class="prototype"><tr><td><span class="RktPn">(</span><a name="(dep._((lib._setup/unpack..rkt)._unpack))"></a><a name="(def._((lib._setup/unpack..rkt)._unpack))"></a><span title="Provided from: setup/unpack"><span class="RktSym"><a href="#(def._((lib._setup/unpack..rkt)._unpack))" class="RktValLink" pltdoc="x">unpack</a></span></span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">archive</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span>[</td><td><span class="RktVar">main-collects-parent-dir</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">print-status</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">get-target-directory</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">force?</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">get-target-plt-directory</span>]<span class="RktPn">)</span></td><td><span class="hspace">&nbsp;</span></td><td>&rarr;</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktSym"><a href="../reference/void.html#(def._((quote._~23~25kernel)._void~3f))" class="RktValLink" pltdoc="x">void?</a></span></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">archive</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Manipulating_Paths.html#(def._((lib._racket/private/misc..rkt)._path-string~3f))" class="RktValLink" pltdoc="x">path-string?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">main-collects-parent-dir</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Manipulating_Paths.html#(def._((lib._racket/private/misc..rkt)._path-string~3f))" class="RktValLink" pltdoc="x">path-string?</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Filesystem.html#(def._((quote._~23~25kernel)._current-directory))" class="RktValLink" pltdoc="x">current-directory</a></span><span class="RktPn">)</span></td></tr><tr><td><table cellspacing="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="RktVar">print-status</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktPn">(</span><span class="RktSym"><a href="../reference/strings.html#(def._((quote._~23~25kernel)._string~3f))" class="RktValLink" pltdoc="x">string?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="../reference/Function_Contracts.html#(form._((lib._racket/contract..rkt)._-~3e))" class="RktStxLink" pltdoc="x">-&gt;</a></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(form._((lib._racket/contract/private/guts..rkt)._any))" class="RktStxLink" pltdoc="x">any</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td>=</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktPn">(</span><span class="RktSym"><a href="../reference/lambda.html#(form._((lib._racket/private/base..rkt)._lambda))" class="RktStxLink" pltdoc="x">lambda</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Writing.html#(def._((quote._~23~25kernel)._printf))" class="RktValLink" pltdoc="x">printf</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"~a\n"</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><table cellspacing="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="RktVar">get-target-directory</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Function_Contracts.html#(form._((lib._racket/contract..rkt)._-~3e))" class="RktStxLink" pltdoc="x">-&gt;</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Manipulating_Paths.html#(def._((lib._racket/private/misc..rkt)._path-string~3f))" class="RktValLink" pltdoc="x">path-string?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td>=</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktPn">(</span><span class="RktSym"><a href="../reference/lambda.html#(form._((lib._racket/private/base..rkt)._lambda))" class="RktStxLink" pltdoc="x">lambda</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Filesystem.html#(def._((quote._~23~25kernel)._current-directory))" class="RktValLink" pltdoc="x">current-directory</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">force?</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(def._((lib._racket/contract/private/guts..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">#f</span></td></tr><tr><td><table cellspacing="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="RktVar">get-target-plt-directory</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Manipulating_Paths.html#(def._((lib._racket/private/misc..rkt)._path-string~3f))" class="RktValLink" pltdoc="x">path-string?</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Manipulating_Paths.html#(def._((lib._racket/private/misc..rkt)._path-string~3f))" class="RktValLink" pltdoc="x">path-string?</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(def._((lib._racket/contract/private/misc..rkt)._listof))" class="RktValLink" pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Manipulating_Paths.html#(def._((lib._racket/private/misc..rkt)._path-string~3f))" class="RktValLink" pltdoc="x">path-string?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="../reference/Function_Contracts.html#(form._((lib._racket/contract..rkt)._-~3e))" class="RktStxLink" pltdoc="x">-&gt;</a></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Manipulating_Paths.html#(def._((lib._racket/private/misc..rkt)._path-string~3f))" class="RktValLink" pltdoc="x">path-string?</a></span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td>=</td><td><span class="hspace">&nbsp;</span></td><td><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="../reference/lambda.html#(form._((lib._racket/private/base..rkt)._lambda))" class="RktStxLink" pltdoc="x">lambda</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVar">preferred-dir</span><span class="hspace">&nbsp;</span><span class="RktVar">main-dir</span><span class="hspace">&nbsp;</span><span class="RktVar">options</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">preferred-dir</span><span class="RktPn">)</span></td></tr></table></td></tr></table></td></tr></table></div><div class="SIntrapara">Unpacks <span class="RktVar">archive</span>.</div></p><p>The <span class="RktVar">main-collects-parent-dir</span> argument is passed along to
<span class="RktVar">get-target-plt-directory</span>.</p><p>The <span class="RktVar">print-status</span> argument is used to report unpacking
progress.</p><p>The <span class="RktVar">get-target-directory</span> argument is used to get the
destination directory for unpacking an archive whose content is
relative to an arbitrary directory.</p><p>If <span class="RktVar">force?</span> is true, then version and required-collection
mismatches (comparing information in the archive to the current
installation) are ignored.</p><p>The <span class="RktVar">get-target-plt-directory</span> function is called to select a
target for installation for an archive whose is relative to the
installation. The function should normally return one if its first two
arguments; the third argument merely contains the first two, but has
only one element if the first two are the same. If the archive does
not request installation for all uses, then the first two arguments
will be different, and the former will be a user-specific location,
while the second will refer to the main installation.</p><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><table cellspacing="0" class="prototype"><tr><td><span class="RktPn">(</span><a name="(dep._((lib._setup/unpack..rkt)._fold-plt-archive))"></a><a name="(def._((lib._setup/unpack..rkt)._fold-plt-archive))"></a><span title="Provided from: setup/unpack"><span class="RktSym"><a href="#(def._((lib._setup/unpack..rkt)._fold-plt-archive))" class="RktValLink" pltdoc="x">fold-plt-archive</a></span></span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">archive</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">on-config-fn</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">on-setup-unit</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">on-directory</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">on-file</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">initial-value</span><span class="RktPn">)</span></td><td><span class="hspace">&nbsp;</span></td><td>&rarr;</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(def._((lib._racket/contract/private/guts..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">archive</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Manipulating_Paths.html#(def._((lib._racket/private/misc..rkt)._path-string~3f))" class="RktValLink" pltdoc="x">path-string?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">on-config-fn</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(def._((lib._racket/contract/private/guts..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(def._((lib._racket/contract/private/guts..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="../reference/Function_Contracts.html#(form._((lib._racket/contract..rkt)._-~3e))" class="RktStxLink" pltdoc="x">-&gt;</a></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(def._((lib._racket/contract/private/guts..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">on-setup-unit</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(def._((lib._racket/contract/private/guts..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/port-ops.html#(def._((quote._~23~25kernel)._input-port~3f))" class="RktValLink" pltdoc="x">input-port?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(def._((lib._racket/contract/private/guts..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="../reference/Function_Contracts.html#(form._((lib._racket/contract..rkt)._-~3e))" class="RktStxLink" pltdoc="x">-&gt;</a></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(def._((lib._racket/contract/private/guts..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">on-directory</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Manipulating_Paths.html#(def._((lib._racket/private/misc..rkt)._path-string~3f))" class="RktValLink" pltdoc="x">path-string?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(def._((lib._racket/contract/private/guts..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="../reference/Function_Contracts.html#(form._((lib._racket/contract..rkt)._-~3e))" class="RktStxLink" pltdoc="x">-&gt;</a></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(def._((lib._racket/contract/private/guts..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">on-file</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Manipulating_Paths.html#(def._((lib._racket/private/misc..rkt)._path-string~3f))" class="RktValLink" pltdoc="x">path-string?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/port-ops.html#(def._((quote._~23~25kernel)._input-port~3f))" class="RktValLink" pltdoc="x">input-port?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(def._((lib._racket/contract/private/guts..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="../reference/Function_Contracts.html#(form._((lib._racket/contract..rkt)._-~3e))" class="RktStxLink" pltdoc="x">-&gt;</a></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(def._((lib._racket/contract/private/guts..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">initial-value</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(def._((lib._racket/contract/private/guts..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span></td></tr></table></div><div class="SIntrapara">Traverses the content of <span class="RktVar">archive</span>, which must be a
<span class="stt">".plt"</span> archive that is created with the default unpacking
unit and configuration expression. The configuration expression is not
evaluated, the unpacking unit is not invoked, and not files are
unpacked to the filesystem. Instead, the information in the archive is
reported back through <span class="RktSym">on-config</span>, <span class="RktVar">on-setup-unit</span>,
<span class="RktVar">on-directory</span>, and <span class="RktVar">on-file</span>, each of which can build on
an accumulated value that starts with <span class="RktVar">initial-value</span> and whose
final value is returned.</div></p><p>The <span class="RktVar">on-config-fn</span> function is called once with an S-expression
that represents a function to implement configuration information.
The second argument to <span class="RktSym">on-config</span> is <span class="RktVar">initial-value</span>,
and the function&rsquo;s result is passes on as the last argument to <span class="RktVar">on-setup-unit</span>.</p><p>The <span class="RktVar">on-setup-unit</span> function is called with the S-expression
representation of the installation unit, an input port that points to
the rest of the file, and the accumulated value. This input port is
the same port that will be used in the rest of processing, so if
<span class="RktVar">on-setup-unit</span> consumes any data from the port, then that data
will not be consumed by the remaining functions. (This means that
on-setup-unit can leave processing in an inconsistent state, which is
not checked by anything, and therefore could cause an error.)
The result of <span class="RktVar">on-setup-unit</span> becomes the new accumulated value.</p><p>For each directory that would be created by the archive when unpacking
normally, <span class="RktVar">on-directory</span> is called with the directory path and the
accumulated value up to that point, and its result is the new
accumulated value.</p><p>For each file that would be created by the archive when unpacking
normally, <span class="RktVar">on-file</span> is called with the file path, an input port
containing the contents of the file, and the accumulated value up to
that point; its result is the new accumulated value. The input port
can be used or ignored, and parsing of the rest of the file continues
the same either way. After <span class="RktVar">on-file</span> returns control, however,
the input port is drained of its content.</p><h5>6.4.3<tt>&nbsp;</tt><a name="(part._format-of-..plt-archives)"></a>Format of <span class="stt">".plt"</span> Archives</h5><p>The extension <span class="stt">".plt"</span> is not required for a distribution
archive, but the <span class="stt">".plt"</span>-extension convention helps users
identify the purpose of a distribution file.</p><p>The raw format of a distribution file is described below. This format
is uncompressed and sensitive to communication modes (text
vs. binary), so the distribution format is derived from the raw format
by first compressing the file using <span class="stt">gzip</span>, then encoding the gzipped
file with the MIME base64 standard (which relies only the characters
<span class="RktInBG"><span class="hspace"></span><span class="RktIn">A</span><span class="hspace"></span></span>-<span class="RktInBG"><span class="hspace"></span><span class="RktIn">Z</span><span class="hspace"></span></span>, <span class="RktInBG"><span class="hspace"></span><span class="RktIn">a</span><span class="hspace"></span></span>-<span class="RktInBG"><span class="hspace"></span><span class="RktIn">z</span><span class="hspace"></span></span>, <span class="RktInBG"><span class="hspace"></span><span class="RktIn">0</span><span class="hspace"></span></span>-<span class="RktInBG"><span class="hspace"></span><span class="RktIn">9</span><span class="hspace"></span></span>,
<span class="RktInBG"><span class="hspace"></span><span class="RktIn">+</span><span class="hspace"></span></span>, <span class="RktInBG"><span class="hspace"></span><span class="RktIn">/</span><span class="hspace"></span></span>, and <span class="RktInBG"><span class="hspace"></span><span class="RktIn">=</span><span class="hspace"></span></span>; all other characters are ignored
when a base64-encoded file is decoded).</p><p>The raw format is</p><ul><li><p><span class="RktInBG"><span class="hspace"></span><span class="RktIn">PLT</span><span class="hspace"></span></span> are the first three characters.</p></li><li><p>A procedure that takes a symbol and a failure thunk and returns
 information about archive for recognized symbols and calls the
 failure thunk for unrecognized symbols. The information symbols
 are:</p><ul><li><p><span class="RktVal">'</span><span class="RktVal">name</span>  &ndash;  a human-readable string describing the archive&rsquo;s
contents. This name is used only for printing messages to the
user during unpacking.</p></li><li><p><span class="RktVal">'</span><span class="RktVal">unpacker</span>  &ndash;  a symbol indicating the expected unpacking
environment. Currently, the only allowed value is <span class="RktVal">'</span><span class="RktVal">mzscheme</span>.</p></li><li><p><span class="RktVal">'</span><span class="RktVal">requires</span>  &ndash;  collections required to be installed before
unpacking the archive, which associated versions; see the
documentation of <span class="RktSym"><a href="plt.html#(def._((lib._setup/pack..rkt)._pack))" class="RktValLink" pltdoc="x">pack</a></span> for details.</p></li><li><p><span class="RktVal">'</span><span class="RktVal">conflicts</span>  &ndash;  collections required <span style="font-style: italic">not</span> to be installed
before unpacking the archive.</p></li><li><p><span class="RktVal">'</span><span class="RktVal">plt-relative?</span>  &ndash;  a boolean; if true, then the archive&rsquo;s
content should be unpacked relative to the plt add-ons directory.</p></li><li><p><span class="RktVal">'</span><span class="RktVal">plt-home-relative?</span>  &ndash;  a boolean; if true and if
<span class="RktVal">'</span><span class="RktVal">plt-relative?</span> is true, then the archive&rsquo;s content should be
unpacked relative to the Racket installation.</p></li><li><p><span class="RktVal">'</span><span class="RktVal">test-plt-dirs</span>  &ndash;  <span class="RktVal">#f</span> or a list of path strings;
in the latter case, a true value of <span class="RktVal">'</span><span class="RktVal">plt-home-relative?</span> is
cancelled if any of the directories in the list (relative to the
Racket installation) is unwritable by the user.</p></li></ul><p>The procedure is extracted from the archive using the <span class="RktSym"><a href="../reference/Reading.html#(def._((quote._~23~25kernel)._read))" class="RktValLink" pltdoc="x">read</a></span>
and <span class="RktSym"><a href="../reference/eval.html#(def._((quote._~23~25kernel)._eval))" class="RktValLink" pltdoc="x">eval</a></span> procedures in a fresh namespace.  </p></li><li><p>An old-style, unsigned unit using <span class="RktPn">(</span><span class="RktSym"><a href="../reference/require.html#(form._((lib._racket/private/base..rkt)._lib))" class="RktStxLink" pltdoc="x">lib</a></span><span class="stt"> </span><span class="RktSym">mzlib/unit200</span><span class="RktPn">)</span> that
drives the unpacking process. The unit accepts two imports: a path
string for the parent of the main <span class="stt">"collects"</span> directory and
an <span class="RktSym">unmztar</span> procedure. The remainder of the unpacking
process consists of invoking this unit. It is expected that the
unit will call <span class="RktSym">unmztar</span> procedure to unpack directories and
files that are defined in the input archive after this unit. The
result of invoking the unit must be a list of collection paths
(where each collection path is a list of strings); once the archive
is unpacked, <span class="stt">raco setup</span> will compile and setup the specified
collections.</p><p>The <span class="RktSym">unmztar</span> procedure takes one argument: a filter
procedure. The filter procedure is called for each directory and
file to be unpacked. It is called with three arguments:</p><ul><li><p><span class="RktVal">'</span><span class="RktVal">dir</span>, <span class="RktVal">'</span><span class="RktVal">file</span>, <span class="RktVal">'</span><span class="RktVal">file-replace</span>
 &ndash;  indicates whether the item to be
unpacked is a directory, a file, or a file to be replaced, </p></li><li><p>a relative path string  &ndash;  the pathname of the directory or file
to be unpacked, relative to the unpack directory, and</p></li><li><p>a path string for the unpack directory (which can vary for a
Racket-relative install when elements of the archive start with
<span class="RktVal">"collects"</span>, <span class="RktVal">"lib"</span>, etc.).</p></li></ul><p>If the filter procedure returns <span class="RktVal">#f</span> for a directory or file, the
directory or file is not unpacked. If the filter procedure returns
<span class="RktVal">#t</span> and the directory or file for <span class="RktVal">'</span><span class="RktVal">dir</span> or <span class="RktVal">'</span><span class="RktVal">file</span>
already exists, it is not created. (The file for <span class="RktSym">file-replace</span>
need not exist already.)</p><p>When a directory is unpacked, intermediate directories are created
as necessary to create the specified directory. When a file is
unpacked, the directory must already exist.</p><p>The unit is extracted from the archive using <span class="RktSym"><a href="../reference/Reading.html#(def._((quote._~23~25kernel)._read))" class="RktValLink" pltdoc="x">read</a></span> and
<span class="RktSym"><a href="../reference/eval.html#(def._((quote._~23~25kernel)._eval))" class="RktValLink" pltdoc="x">eval</a></span>.</p></li></ul><p>Assuming that the unpacking unit calls the <span class="RktSym">unmztar</span> procedure, the
archive should continue with <a href="#(tech._unpackable)" class="techoutside" pltdoc="x"><span class="techinside">unpackables</span></a>. <a href="#(tech._unpackable)" class="techoutside" pltdoc="x"><span class="techinside">Unpackables</span></a> are
extracted until the end-of-file is found (as indicated by an <span class="RktInBG"><span class="hspace"></span><span class="RktIn">=</span><span class="hspace"></span></span>
in the base64-encoded input archive).</p><p>An <a name="(tech._unpackable)"></a><span style="font-style: italic">unpackable</span> is one of the following:</p><ul><li><p>The symbol <span class="RktVal">'</span><span class="RktVal">dir</span> followed by a list. The <span class="RktSym"><a href="../reference/Manipulating_Paths.html#(def._((quote._~23~25kernel)._build-path))" class="RktValLink" pltdoc="x">build-path</a></span>
procedure will be applied to the list to obtain a relative path for
the directory (and the relative path is combined with the target
directory path to get a complete path).</p><p>The <span class="RktVal">'</span><span class="RktVal">dir</span> symbol and list are extracted from the archive
using <span class="RktSym"><a href="../reference/Reading.html#(def._((quote._~23~25kernel)._read))" class="RktValLink" pltdoc="x">read</a></span> (and the result is <span style="font-style: italic">not</span>
<span class="RktSym"><a href="../reference/eval.html#(def._((quote._~23~25kernel)._eval))" class="RktValLink" pltdoc="x">eval</a></span>uated).</p></li><li><p>The symbol <span class="RktVal">'</span><span class="RktVal">file</span>, a list, a number, an asterisk, and the file
data. The list specifies the file&rsquo;s relative path, just as for
directories. The number indicates the size of the file to be
unpacked in bytes. The asterisk indicates the start of the file
data; the next n bytes are written to the file, where n is the
specified size of the file.</p><p>The symbol, list, and number are all extracted from the archive
using <span class="RktSym"><a href="../reference/Reading.html#(def._((quote._~23~25kernel)._read))" class="RktValLink" pltdoc="x">read</a></span> (and the result is <span style="font-style: italic">not</span>
<span class="RktSym"><a href="../reference/eval.html#(def._((quote._~23~25kernel)._eval))" class="RktValLink" pltdoc="x">eval</a></span>uated). After the number is read, input characters
are discarded until an asterisk is found. The file data must
follow this asterisk immediately.</p></li><li><p>The symbol <span class="RktVal">'</span><span class="RktVal">file-replace</span> is treated like <span class="RktVal">'</span><span class="RktVal">file</span>,
but if the file exists on disk already, the file in the archive replaces
the file on disk.</p></li></ul><div class="navsetbottom"><span class="navleft"><form class="searchform"><input class="searchbox" style="color: #888;" type="text" value="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;5.0.2&quot;, &quot;../&quot;);" onfocus="this.style.color=&quot;black&quot;; this.style.textAlign=&quot;left&quot;; if (this.value == &quot;...search manuals...&quot;) this.value=&quot;&quot;;" onblur="if (this.value.match(/^ *$/)) { this.style.color=&quot;#888&quot;; this.style.textAlign=&quot;center&quot;; this.value=&quot;...search manuals...&quot;; }" /></form>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" pltdoc="x" onclick="return GotoPLTRoot(&quot;5.0.2&quot;);">top</a></span><span class="navright"><a href="setup-plt-plt.html" title="backward to &quot;6.3 API for Installation&quot;" pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="setup.html" title="up to &quot;6 raco setup: Installation Management&quot;" pltdoc="x">up</a>&nbsp;&nbsp;<a href="dirs.html" title="forward to &quot;6.5 API for Finding Installation Directories&quot;" pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>